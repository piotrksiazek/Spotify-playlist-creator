{% extends "base.html" %}
{% block content %}
<div class="containter narrow">
    <form action="" method="post" novalidate>
        {{ form.hidden_tag() }}
        <p>
            {{ wtf.form_field(form.track_id) }}
        </p>
        <div class="container">
        <p>{{ wtf.form_field(form.submit) }}</p>
        </div>
    </form>
</div>
{% if track %}
    <h1 class="centered"> {{ track['name']}} by {{ track['artist']}}</h1>
    <iframe class="img-center" src="https://open.spotify.com/embed/track/{{ track['id'] }}" width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
{% endif %}
{% if audio_features %}
    <div><p class="text-center" id="audio-features">Audio features</p></div>
    <div class="ct-chart ct-perfect-fourth container horizontal-chart"></div>
{% endif %}
{% if  track['lyrics']%}
    {% for verse in track['lyrics'].split('\n') %}
    <ul class="text-center">{{ verse }}</ul>
    {% endfor %}
{% endif %}
{#    audio features chart#}
    <script>
        new Chartist.Bar('.ct-chart', {
          labels: ['energy', 'speechiness', 'acousticness', 'instrumentalness', 'liveness', 'valence'],
          series: [
            [{{ audio_features['energy'] }}, {{ audio_features['speechiness'] }}, {{ audio_features['acousticness'] }},
                {{ audio_features['instrumentalness'] }}, {{ audio_features['liveness'] }}, {{ audio_features['valence'] }}]
          ]
        }, {
          seriesBarDistance: 10,
          reverseData: true,
          horizontalBars: true,
          axisY: {
            offset: 70
          }
        });

    </script>
{% endblock %}